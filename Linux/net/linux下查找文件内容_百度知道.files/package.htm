<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<!-- saved from url=(0181)http://web.im.baidu.com/m/tieba/webim-api/package.html?guid=gq35q8s0&netport=1000&syncport=1002&storageport=1001&peer=http%3A%2F%2Fzhidao.baidu.com&relay=undefined&username=80330582 -->
<HTML><HEAD><TITLE>net</TITLE>
<META http-equiv=Content-Type content="text/html; charset=utf-8">
<SCRIPT src="package.files/tangram-1.1.0.js" type=text/javascript></SCRIPT>

<SCRIPT src="package.files/base.js" type=text/javascript></SCRIPT>

<META content="MSHTML 6.00.2900.6104" name=GENERATOR></HEAD>
<BODY>
<SCRIPT type=text/javascript>var url=window.location.href;var peerURI=decodeURIComponent(baidu.url.getQueryValue(url,"peer")),relayURI=decodeURIComponent(baidu.url.getQueryValue(url,"relay"));var storagePort=baidu.url.getQueryValue(url,"storageport");var netPort=baidu.url.getQueryValue(url,"netport");var syncPort=baidu.url.getQueryValue(url,"syncPort");var username=decodeURIComponent(baidu.url.getQueryValue(url,"username"));var guid=baidu.url.getQueryValue(url,"guid");var xpc=new CrossPageChannel({peerURI:peerURI,replayURI:relayURI});var xmlHttpPool={};function netServiceHandler(d){var a=new Date().getTime();switch(d.method.toLowerCase()){case"post":xmlHttpPool[a]=baidu.ajax.post(d.url,d.data,function(e){if(xmlHttpPool[a]){delete xmlHttpPool[a]}xpc.send(netPort,{callback:d.callback,responseText:e.responseText})});break;case"get":xmlHttpPool[a]=baidu.ajax.get(d.url,function(e){if(xmlHttpPool[a]){delete xmlHttpPool[a]}xpc.send(netPort,{callback:d.callback,responseText:e.responseText})});break;case"getbyserver":baidu.sio.callByServer(d.url,function(e){xpc.send(netPort,{callback:d.callback,responseText:baidu.json.encode(e)})});break;case"abort":for(var c in xmlHttpPool){try{xmlHttpPool[c].abort()}catch(b){}delete xmlHttpPool[a]}break}}xpc.register(netPort,netServiceHandler);var eKey=baidu.cookie.get("bduss");var storageSync=new baidu.more.storage.Store("mulansync",{eKey:eKey});baidu.more.sync.init(xpc,storageSync,{syncPort:syncPort});var storageMap={};function storageServiceHandler(a){storageMap[a.key]=storageMap[a.key]||new baidu.more.storage.Store("mulanstorage",{eKey:eKey});var b=storageMap[a.key];switch(a.method.toLowerCase()){case"set":b.set(a.key,a.value,function(c,d){xpc.send(storagePort,{callback:a.callback,status:c,value:d})},a.params);break;case"get":b.get(a.key,function(c,d){xpc.send(storagePort,{callback:a.callback,status:c,value:d})},a.params);break;case"remove":b.remove(a.key,function(c,d){xpc.send(storagePort,{callback:a.callback,status:c,value:d})},a.params);break}}xpc.register(storagePort,storageServiceHandler);baidu.on(window,"unload",function(){for(var a in xmlHttpPool){var b=xmlHttpPool[a];b.onreadystatechange=new Function();b.abort();b=null}xmlHttpPool=null});</SCRIPT>
</BODY></HTML>
