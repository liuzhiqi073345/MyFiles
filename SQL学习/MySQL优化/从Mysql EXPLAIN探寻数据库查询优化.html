<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Examples</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="" rel="stylesheet">
</head>
<body>
 <table>
                                                                                <tbody>
                                                                                    <tr>
                                                                                        <td width="670px" style="position: relative;">

                                                                                            <font size="5"><strong>从Mysql EXPLAIN探寻数据库查询优化</strong></font><br><br>
<font size="2">作者: 蘑菇 &nbsp;
日期: 2010-07-20 16:37:20 &nbsp;
阅读: http://www.eduicc.com/index.php?load=read&amp;id=35</font>
<hr style="color: #cccccc; height: 1px;">
<span style="font-weight: bold;">一. EXPLAIN 语法</span><br>
<div class="hl-surround">
<ol title="Double click to hide line number." class="hl-main ln-show">
    <li class="hl-firstline"><span style="color: Green;">EXPLAIN</span><span style="color: Gray;"> </span><span style="color: Blue;">tbl_name</span><span style="color: Gray;">|</span><span style="color: Green;">SELECT</span><span style="color: Gray;"> </span><span style="color: Blue;">select_options</span></li>
</ol>
</div>
<br>EXPLAIN tbl_name和DESCRIBE tbl_name的作用是一样的，用于显示表结构等信息。<br><br>当我们在select语句前加上EXPLAIN后，Mysql将告诉我们它是如何处理select语句的，提供表之间的联结方式、使用索引等有关信息。<br><br><span style="font-weight: bold;">二. 测试环境简单介绍</span><br>为了节省创建表的时间，我用了joomla的文章表做测试，因为要演示优化过程，所以我事先删除了表里除主键之外的所有索引。<br>这里用到了三个表：<br><br>
<div class="hl-surround">
<div class="hl-main"><span style="color: Blue;">mysql</span><span style="color: Gray;">&gt; </span><span style="color: Green;">explain</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_content</span><span style="color: Gray;">;<br>+------------------+------------------+------+-----+---------------------+----------------+<br>| </span><span style="color: Blue;">Field</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">Type</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">Null</span><span style="color: Gray;"> | </span><span style="color: Green;">Key</span><span style="color: Gray;"> | </span><span style="color: Green;">Default</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">Extra</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>+------------------+------------------+------+-----+---------------------+----------------+<br>| </span><span style="color: Blue;">id</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">int</span><span style="color: Olive;">(</span><span style="color: Maroon;">11</span><span style="color: Olive;">)</span><span style="color: Gray;"> </span><span style="color: Green;">unsigned</span><span style="color: Gray;"> | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;| </span><span style="color: Blue;">PRI</span><span style="color: Gray;"> | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">auto_increment</span><span style="color: Gray;"> |<br>| </span><span style="color: Blue;">title</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">varchar</span><span style="color: Olive;">(</span><span style="color: Maroon;">255</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">alias</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">varchar</span><span style="color: Olive;">(</span><span style="color: Maroon;">255</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">title_alias</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">varchar</span><span style="color: Olive;">(</span><span style="color: Maroon;">255</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">introtext</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">mediumtext</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">fulltext</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">mediumtext</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">state</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">tinyint</span><span style="color: Olive;">(</span><span style="color: Maroon;">3</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">sectionid</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">int</span><span style="color: Olive;">(</span><span style="color: Maroon;">11</span><span style="color: Olive;">)</span><span style="color: Gray;"> </span><span style="color: Green;">unsigned</span><span style="color: Gray;"> | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">mask</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">int</span><span style="color: Olive;">(</span><span style="color: Maroon;">11</span><span style="color: Olive;">)</span><span style="color: Gray;"> </span><span style="color: Green;">unsigned</span><span style="color: Gray;"> | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">catid</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">int</span><span style="color: Olive;">(</span><span style="color: Maroon;">11</span><span style="color: Olive;">)</span><span style="color: Gray;"> </span><span style="color: Green;">unsigned</span><span style="color: Gray;"> | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">created</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">datetime</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0000</span><span style="color: Gray;">-</span><span style="color: Maroon;">00</span><span style="color: Gray;">-</span><span style="color: Maroon;">00</span><span style="color: Gray;"> </span><span style="color: Maroon;">00</span><span style="color: Gray;">:</span><span style="color: Maroon;">00</span><span style="color: Gray;">:</span><span style="color: Maroon;">00</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">created_by</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">int</span><span style="color: Olive;">(</span><span style="color: Maroon;">11</span><span style="color: Olive;">)</span><span style="color: Gray;"> </span><span style="color: Green;">unsigned</span><span style="color: Gray;"> | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">created_by_alias</span><span style="color: Gray;"> | </span><span style="color: Blue;">varchar</span><span style="color: Olive;">(</span><span style="color: Maroon;">255</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">modified</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">datetime</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0000</span><span style="color: Gray;">-</span><span style="color: Maroon;">00</span><span style="color: Gray;">-</span><span style="color: Maroon;">00</span><span style="color: Gray;"> </span><span style="color: Maroon;">00</span><span style="color: Gray;">:</span><span style="color: Maroon;">00</span><span style="color: Gray;">:</span><span style="color: Maroon;">00</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">modified_by</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">int</span><span style="color: Olive;">(</span><span style="color: Maroon;">11</span><span style="color: Olive;">)</span><span style="color: Gray;"> </span><span style="color: Green;">unsigned</span><span style="color: Gray;"> | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">checked_out</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">int</span><span style="color: Olive;">(</span><span style="color: Maroon;">11</span><span style="color: Olive;">)</span><span style="color: Gray;"> </span><span style="color: Green;">unsigned</span><span style="color: Gray;"> | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">checked_out_time</span><span style="color: Gray;"> | </span><span style="color: Green;">datetime</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0000</span><span style="color: Gray;">-</span><span style="color: Maroon;">00</span><span style="color: Gray;">-</span><span style="color: Maroon;">00</span><span style="color: Gray;"> </span><span style="color: Maroon;">00</span><span style="color: Gray;">:</span><span style="color: Maroon;">00</span><span style="color: Gray;">:</span><span style="color: Maroon;">00</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">publish_up</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">datetime</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0000</span><span style="color: Gray;">-</span><span style="color: Maroon;">00</span><span style="color: Gray;">-</span><span style="color: Maroon;">00</span><span style="color: Gray;"> </span><span style="color: Maroon;">00</span><span style="color: Gray;">:</span><span style="color: Maroon;">00</span><span style="color: Gray;">:</span><span style="color: Maroon;">00</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">publish_down</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">datetime</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0000</span><span style="color: Gray;">-</span><span style="color: Maroon;">00</span><span style="color: Gray;">-</span><span style="color: Maroon;">00</span><span style="color: Gray;"> </span><span style="color: Maroon;">00</span><span style="color: Gray;">:</span><span style="color: Maroon;">00</span><span style="color: Gray;">:</span><span style="color: Maroon;">00</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">images</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">text</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">urls</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">text</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">attribs</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">text</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">version</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">int</span><span style="color: Olive;">(</span><span style="color: Maroon;">11</span><span style="color: Olive;">)</span><span style="color: Gray;"> </span><span style="color: Green;">unsigned</span><span style="color: Gray;"> | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">1</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">parentid</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">int</span><span style="color: Olive;">(</span><span style="color: Maroon;">11</span><span style="color: Olive;">)</span><span style="color: Gray;"> </span><span style="color: Green;">unsigned</span><span style="color: Gray;"> | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">ordering</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">int</span><span style="color: Olive;">(</span><span style="color: Maroon;">11</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">metakey</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">text</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">metadesc</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">text</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">access</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">int</span><span style="color: Olive;">(</span><span style="color: Maroon;">11</span><span style="color: Olive;">)</span><span style="color: Gray;"> </span><span style="color: Green;">unsigned</span><span style="color: Gray;"> | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">hits</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">int</span><span style="color: Olive;">(</span><span style="color: Maroon;">11</span><span style="color: Olive;">)</span><span style="color: Gray;"> </span><span style="color: Green;">unsigned</span><span style="color: Gray;"> | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">metadata</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">text</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>+------------------+------------------+------+-----+---------------------+----------------+<br></span><span style="color: Maroon;">30</span><span style="color: Gray;"> </span><span style="color: Green;">rows</span><span style="color: Gray;"> </span><span style="color: Green;">in</span><span style="color: Gray;"> </span><span style="color: Blue;">set</span><span style="color: Gray;"> </span><span style="color: Olive;">(</span><span style="color: Maroon;">0.00</span><span style="color: Gray;"> </span><span style="color: Blue;">sec</span><span style="color: Olive;">)</span><span style="color: Gray;"><br>&nbsp;<br></span><span style="color: Blue;">mysql</span><span style="color: Gray;">&gt; </span><span style="color: Green;">select</span><span style="color: Gray;"> </span><span style="color: Green;">count</span><span style="color: Olive;">(</span><span style="color: Gray;">*</span><span style="color: Olive;">)</span><span style="color: Gray;"> </span><span style="color: Green;">from</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_content</span><span style="color: Gray;">;<br>+----------+<br>| </span><span style="color: Green;">count</span><span style="color: Olive;">(</span><span style="color: Gray;">*</span><span style="color: Olive;">)</span><span style="color: Gray;"> |<br>+----------+<br>|&nbsp; &nbsp; </span><span style="color: Maroon;">46585</span><span style="color: Gray;"> |<br>+----------+<br></span><span style="color: Maroon;">1</span><span style="color: Gray;"> </span><span style="color: Green;">row</span><span style="color: Gray;"> </span><span style="color: Green;">in</span><span style="color: Gray;"> </span><span style="color: Blue;">set</span><span style="color: Gray;"> </span><span style="color: Olive;">(</span><span style="color: Maroon;">0.00</span><span style="color: Gray;"> </span><span style="color: Blue;">sec</span><span style="color: Olive;">)</span><span style="color: Gray;"><br>&nbsp;<br></span><span style="color: Blue;">mysql</span><span style="color: Gray;">&gt; </span><span style="color: Green;">desc</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_categories</span><span style="color: Gray;">;<br>+------------------+---------------------+------+-----+---------------------+----------------+<br>| </span><span style="color: Blue;">Field</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">Type</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">Null</span><span style="color: Gray;"> | </span><span style="color: Green;">Key</span><span style="color: Gray;"> | </span><span style="color: Green;">Default</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">Extra</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>+------------------+---------------------+------+-----+---------------------+----------------+<br>| </span><span style="color: Blue;">id</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">int</span><span style="color: Olive;">(</span><span style="color: Maroon;">11</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;| </span><span style="color: Blue;">PRI</span><span style="color: Gray;"> | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">auto_increment</span><span style="color: Gray;"> |<br>| </span><span style="color: Blue;">parent_id</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">int</span><span style="color: Olive;">(</span><span style="color: Maroon;">11</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">title</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">varchar</span><span style="color: Olive;">(</span><span style="color: Maroon;">255</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">name</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">varchar</span><span style="color: Olive;">(</span><span style="color: Maroon;">255</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">alias</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">varchar</span><span style="color: Olive;">(</span><span style="color: Maroon;">255</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">image</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">varchar</span><span style="color: Olive;">(</span><span style="color: Maroon;">255</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">section</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">varchar</span><span style="color: Olive;">(</span><span style="color: Maroon;">50</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">image_position</span><span style="color: Gray;">&nbsp; &nbsp;| </span><span style="color: Blue;">varchar</span><span style="color: Olive;">(</span><span style="color: Maroon;">30</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">description</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">text</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">published</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">tinyint</span><span style="color: Olive;">(</span><span style="color: Maroon;">1</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">checked_out</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">int</span><span style="color: Olive;">(</span><span style="color: Maroon;">11</span><span style="color: Olive;">)</span><span style="color: Gray;"> </span><span style="color: Green;">unsigned</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">checked_out_time</span><span style="color: Gray;"> | </span><span style="color: Green;">datetime</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0000</span><span style="color: Gray;">-</span><span style="color: Maroon;">00</span><span style="color: Gray;">-</span><span style="color: Maroon;">00</span><span style="color: Gray;"> </span><span style="color: Maroon;">00</span><span style="color: Gray;">:</span><span style="color: Maroon;">00</span><span style="color: Gray;">:</span><span style="color: Maroon;">00</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">editor</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">varchar</span><span style="color: Olive;">(</span><span style="color: Maroon;">50</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">YES</span><span style="color: Gray;">&nbsp; |&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">ordering</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">int</span><span style="color: Olive;">(</span><span style="color: Maroon;">11</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">access</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">tinyint</span><span style="color: Olive;">(</span><span style="color: Maroon;">3</span><span style="color: Olive;">)</span><span style="color: Gray;"> </span><span style="color: Green;">unsigned</span><span style="color: Gray;"> | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">count</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">int</span><span style="color: Olive;">(</span><span style="color: Maroon;">11</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">params</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">text</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>+------------------+---------------------+------+-----+---------------------+----------------+<br></span><span style="color: Maroon;">17</span><span style="color: Gray;"> </span><span style="color: Green;">rows</span><span style="color: Gray;"> </span><span style="color: Green;">in</span><span style="color: Gray;"> </span><span style="color: Blue;">set</span><span style="color: Gray;"> </span><span style="color: Olive;">(</span><span style="color: Maroon;">0.00</span><span style="color: Gray;"> </span><span style="color: Blue;">sec</span><span style="color: Olive;">)</span><span style="color: Gray;"><br>&nbsp;<br></span><span style="color: Blue;">mysql</span><span style="color: Gray;">&gt; </span><span style="color: Green;">select</span><span style="color: Gray;"> </span><span style="color: Green;">count</span><span style="color: Olive;">(</span><span style="color: Gray;">*</span><span style="color: Olive;">)</span><span style="color: Gray;"> </span><span style="color: Green;">from</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_categories</span><span style="color: Gray;">;<br>+----------+<br>| </span><span style="color: Green;">count</span><span style="color: Olive;">(</span><span style="color: Gray;">*</span><span style="color: Olive;">)</span><span style="color: Gray;"> |<br>+----------+<br>|&nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: Maroon;">18</span><span style="color: Gray;"> |<br>+----------+<br></span><span style="color: Maroon;">1</span><span style="color: Gray;"> </span><span style="color: Green;">row</span><span style="color: Gray;"> </span><span style="color: Green;">in</span><span style="color: Gray;"> </span><span style="color: Blue;">set</span><span style="color: Gray;"> </span><span style="color: Olive;">(</span><span style="color: Maroon;">0.00</span><span style="color: Gray;"> </span><span style="color: Blue;">sec</span><span style="color: Olive;">)</span><span style="color: Gray;"><br>&nbsp;<br></span><span style="color: Blue;">mysql</span><span style="color: Gray;">&gt; </span><span style="color: Green;">desc</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_sections</span><span style="color: Gray;">;<br>+------------------+---------------------+------+-----+---------------------+----------------+<br>| </span><span style="color: Blue;">Field</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">Type</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">Null</span><span style="color: Gray;"> | </span><span style="color: Green;">Key</span><span style="color: Gray;"> | </span><span style="color: Green;">Default</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">Extra</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>+------------------+---------------------+------+-----+---------------------+----------------+<br>| </span><span style="color: Blue;">id</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">int</span><span style="color: Olive;">(</span><span style="color: Maroon;">11</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;| </span><span style="color: Blue;">PRI</span><span style="color: Gray;"> | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">auto_increment</span><span style="color: Gray;"> |<br>| </span><span style="color: Blue;">title</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">varchar</span><span style="color: Olive;">(</span><span style="color: Maroon;">255</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">name</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">varchar</span><span style="color: Olive;">(</span><span style="color: Maroon;">255</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">alias</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">varchar</span><span style="color: Olive;">(</span><span style="color: Maroon;">255</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">image</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">text</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">scope</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">varchar</span><span style="color: Olive;">(</span><span style="color: Maroon;">50</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">image_position</span><span style="color: Gray;">&nbsp; &nbsp;| </span><span style="color: Blue;">varchar</span><span style="color: Olive;">(</span><span style="color: Maroon;">30</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">description</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">text</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">published</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">tinyint</span><span style="color: Olive;">(</span><span style="color: Maroon;">1</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">checked_out</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">int</span><span style="color: Olive;">(</span><span style="color: Maroon;">11</span><span style="color: Olive;">)</span><span style="color: Gray;"> </span><span style="color: Green;">unsigned</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">checked_out_time</span><span style="color: Gray;"> | </span><span style="color: Green;">datetime</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0000</span><span style="color: Gray;">-</span><span style="color: Maroon;">00</span><span style="color: Gray;">-</span><span style="color: Maroon;">00</span><span style="color: Gray;"> </span><span style="color: Maroon;">00</span><span style="color: Gray;">:</span><span style="color: Maroon;">00</span><span style="color: Gray;">:</span><span style="color: Maroon;">00</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">ordering</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">int</span><span style="color: Olive;">(</span><span style="color: Maroon;">11</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">access</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">tinyint</span><span style="color: Olive;">(</span><span style="color: Maroon;">3</span><span style="color: Olive;">)</span><span style="color: Gray;"> </span><span style="color: Green;">unsigned</span><span style="color: Gray;"> | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">count</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">int</span><span style="color: Olive;">(</span><span style="color: Maroon;">11</span><span style="color: Olive;">)</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>| </span><span style="color: Blue;">params</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">text</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">NO</span><span style="color: Gray;">&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>+------------------+---------------------+------+-----+---------------------+----------------+<br></span><span style="color: Maroon;">15</span><span style="color: Gray;"> </span><span style="color: Green;">rows</span><span style="color: Gray;"> </span><span style="color: Green;">in</span><span style="color: Gray;"> </span><span style="color: Blue;">set</span><span style="color: Gray;"> </span><span style="color: Olive;">(</span><span style="color: Maroon;">0.00</span><span style="color: Gray;"> </span><span style="color: Blue;">sec</span><span style="color: Olive;">)</span><span style="color: Gray;"><br>&nbsp;<br></span><span style="color: Blue;">mysql</span><span style="color: Gray;">&gt; </span><span style="color: Green;">select</span><span style="color: Gray;"> </span><span style="color: Green;">count</span><span style="color: Olive;">(</span><span style="color: Gray;">*</span><span style="color: Olive;">)</span><span style="color: Gray;"> </span><span style="color: Green;">from</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_sections</span><span style="color: Gray;">;<br>+----------+<br>| </span><span style="color: Green;">count</span><span style="color: Olive;">(</span><span style="color: Gray;">*</span><span style="color: Olive;">)</span><span style="color: Gray;"> |<br>+----------+<br>|&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: Maroon;">2</span><span style="color: Gray;"> |<br>+----------+<br></span><span style="color: Maroon;">1</span><span style="color: Gray;"> </span><span style="color: Green;">row</span><span style="color: Gray;"> </span><span style="color: Green;">in</span><span style="color: Gray;"> </span><span style="color: Blue;">set</span><span style="color: Gray;"> </span><span style="color: Olive;">(</span><span style="color: Maroon;">0.00</span><span style="color: Gray;"> </span><span style="color: Blue;">sec</span><span style="color: Olive;">)</span></div>
</div>
<br>简单说明：<br>jos_sections我们可以称它为大类表，jos_categories为小类表，jos_content为文章表，三个表的记录数分别为2、18、46585。<br><br>重要的字段基本上可以见名知义，只对几个联结字段说明一下：<br>jos_categories.secion:&#12288;这个字段是jos_section的主键id，它表明了大类和小类的父子关系，至于jos_categories.parent_id，我们可以先无视它的存在。<br>jos_content.sectionid: 这个字段也是jos_section的主键id，它表明了文章所属的大类。<br>jos_content.catid:&#12288;这个字段是jos_categories的主键id，它表明了文章所属的小类。<br><br>至于为什么会用两个表来存储类别，而不用parent_id的方式实现无限级分类，我们也不必深究，因为这个就是joomla的结构，我们只是用来测试EXPLAIN而已。<br><br><span style="font-weight: bold;">三. 测试过程</span><br>下面我们说明如何使用EXPLAIN查看执行过程并对表结构和sql语句进行优化。<br>在下面的测试过程中，我会用一些看来根本就没有意义的SQL语句，只是为了演示SQL语句结构和输出效果，其可用价值我们大可不必过于追究，在实际生产中还要以实际应用为准。<br><br>
<div class="hl-surround">
<div class="hl-main"><span style="color: Blue;">mysql</span><span style="color: Gray;">&gt; </span><span style="color: Green;">explain</span><span style="color: Gray;"> </span><span style="color: Green;">select</span><span style="color: Gray;"> * </span><span style="color: Green;">from</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_content</span><span style="color: Gray;"> </span><span style="color: Green;">where</span><span style="color: Gray;"> </span><span style="color: Blue;">id</span><span style="color: Gray;">=</span><span style="color: Maroon;">16</span><span style="color: Gray;">;<br>+----+-------------+-------------+-------+---------------+---------+---------+-------+------+-------+<br>| </span><span style="color: Blue;">id</span><span style="color: Gray;"> | </span><span style="color: Blue;">select_type</span><span style="color: Gray;"> | </span><span style="color: Green;">table</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">type</span><span style="color: Gray;">&nbsp; | </span><span style="color: Blue;">possible_keys</span><span style="color: Gray;"> | </span><span style="color: Green;">key</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">key_len</span><span style="color: Gray;"> | </span><span style="color: Blue;">ref</span><span style="color: Gray;">&nbsp; &nbsp;| </span><span style="color: Green;">rows</span><span style="color: Gray;"> | </span><span style="color: Blue;">Extra</span><span style="color: Gray;"> |<br>+----+-------------+-------------+-------+---------------+---------+---------+-------+------+-------+<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">jos_content</span><span style="color: Gray;"> | </span><span style="color: Blue;">const</span><span style="color: Gray;"> | </span><span style="color: Green;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">PRIMARY</span><span style="color: Gray;"> | </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">const</span><span style="color: Gray;"> |&nbsp; &nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp; &nbsp;|<br>+----+-------------+-------------+-------+---------------+---------+---------+-------+------+-------+<br></span><span style="color: Maroon;">1</span><span style="color: Gray;"> </span><span style="color: Green;">row</span><span style="color: Gray;"> </span><span style="color: Green;">in</span><span style="color: Gray;"> </span><span style="color: Blue;">set</span><span style="color: Gray;"> </span><span style="color: Olive;">(</span><span style="color: Maroon;">0.00</span><span style="color: Gray;"> </span><span style="color: Blue;">sec</span><span style="color: Olive;">)</span></div>
</div>
<br><br>因为使用了EXPLAIN关键字，所以Mysql为我们列出了一些查询信息，它包含以下列：<br><br><span style="font-weight: bold;">id:</span> SELECT的识别符，这是SELECT的查询序列号。<br><br><span style="font-weight: bold;">select_type:</span> SELECT类型，有以下几种不同的类型<br>&nbsp;&nbsp;&nbsp; (1).SIMPLE: 简单的SELECT（不使用UNION或子查询）<br>&nbsp;&nbsp;&nbsp; (2).PRIMARY: 最外面的SELECT，如果我们使用UNION或子查询，第一个查询将会是这个类型<br>&nbsp;&nbsp;&nbsp; (3).UNION: 使用UNION查询时，除第一个语句外的所有语句会返回这个类型<br>&nbsp;&nbsp;&nbsp; (4).DEPENDENT UNION:&#12288;UNION中的第二个或后面的SELECT语句，取决于外面的查询。<br>&nbsp;&nbsp;&nbsp; (5).UNION RESULT: UNION的结果。<br>&nbsp;&nbsp;&nbsp; (6).SUBQUERY: 子查询中的第一个SELECT。<br>&nbsp;&nbsp;&nbsp; (7).DEPENDENT SUBQUERY: 子查询中的第一个SELECT，取决于外面的查询。<br>&nbsp;&nbsp;&nbsp; (8).DERIVED: 衍生表会返回这个类型。如：select * from (select * from jos_content) as A;。<br><br style="font-weight: bold;"><span style="font-weight: bold;">table:</span> 输出引用的表。<br><br><span style="font-weight: bold;">type: </span>联接类型，从这个选项我们可以初步判断查询效率，有以下几种不同的类型（按从最佳到最坏排序）：<br>&nbsp;&nbsp;&nbsp; (1).system: 表中仅有一行记录，这是const的一个特例。<br>&nbsp;&nbsp;&nbsp; (2).const: 表中最多有一行符合查询条件，它在查询开始时被读取。因为只有一行，这行的列值可被优化器剩余部分认为是常数。const表很快，因为它们只被读取一次！（如上面的查询）<br>&nbsp;&nbsp;&nbsp;
(3).eq_ref: 对于每个来自于前面的表的行组合，从该表中读取一行。例如：select * from A,B where
A.id=B.id，如果id在B表中是unique或primary
key，会返回这个类型。它是说对于A表中的每一行，在B表中读取符合记录的一行。除了const之外，这是最好的联接类型。<br>&nbsp;&nbsp;&nbsp; (4).ref: 这个类型跟eq_ref类似，不同的是eq_ref能根据unique或主键在后面的表中选择出唯一的行，而不能确定唯一行，则使用这个类型。<br>&nbsp;&nbsp;&nbsp; (5).ref_or_null: 该联接类型如同ref，但是添加了MySQL 可以专门搜索包含NULL值的行。在解决子查询中经常使用该联接类型的优化。<br>&nbsp;&nbsp;&nbsp;
(6).index_merge:
索引合并方法用于通过range扫描搜索行并将结果合成一个。合并会产生并集、交集或者正在进行的扫描的交集的并集。在EXPLAIN输出中，该方法表现
为type列内的index_merge。在这种情况下，key列包含一列使用的索引，key_len包含这些索引的最长的关键元素。<br>&nbsp;&nbsp;&nbsp;
(7).unique_subquery: unique_subquery是一个索引查找函数，可以完全替换子查询，效率更高。explain
select * from jos_content where id in (select id from
jos_categories);会使用这个类型。<br>&nbsp;&nbsp;&nbsp; (8).index_subquery: 该联接类型类似于unique_subquery。可以替换IN子查询，但只适合子查询中的非唯一索引。<br>&nbsp;&nbsp;&nbsp;
(9).range:
只检索给定范围的行，使用一个索引来选择行。key列显示使用了哪个索引。key_len包含所使用索引的最长关键元素。在该类型中ref列为NULL。
当使用=、&lt;&gt;、&gt;、&gt;=、&lt;、&lt;=、IS
NULL、&lt;=&gt;、BETWEEN或者IN操作符，用常量比较关键字列时，可以使用这个类型。<br>&nbsp;&nbsp;&nbsp; (10).index: 这与ALL相同，除了只有索引树被扫描。这通常比ALL快，因为索引文件通常比数据文件小。<br>&nbsp;&nbsp;&nbsp; (11).all: 对于每个来自于先前的表的行组合，将要做一个完整的表扫描。如果表格是第一个没标记const的表，效果不是很好，并且在所有的其他情况下很差。你可以通过增加更多的索引来避免ALL，使得行能从早先的表中基于常数值或列值被检索出来。<br>&nbsp;&nbsp;&nbsp; <br><span style="font-weight: bold;">possible_keys:</span> possible_keys列指出MySQL能使用哪个索引在该表中找到行。注意，该列完全独立于EXPLAIN输出所示的表的次序。这意味着在 possible_keys中的某些键实际上不能按生成的表次序使用。<br>如果该列是NULL，则没有相关的索引。在这种情况下，可以通过检查WHERE子句看是否它引用某些列或适合索引的列来提高你的查询性能。如果是这样，创造一个适当的索引并且再次用EXPLAIN检查查询。<br><br><span style="font-weight: bold;">key:</span>
key列显示MySQL实际决定使用的键（索引）。如果没有选择索引，键是NULL。要想强制MySQL使用或忽视possible_keys列中的索
引，在查询中使用FORCE INDEX、USE INDEX或者IGNORE INDEX。对于MyISAM 和BDB 表，运行ANALYZE
TABLE 可以帮助优化器选择更好的索引。对于MyISAM 表，可以使用myisamchk --analyze。<br><br><span style="font-weight: bold;">key_len:</span> 此列显示MySQL决定使用的键长度。如果键是NULL，则长度为NULL。注意通过key_len值我们可以确定MySQL将实际使用一个多部关键字的几个部分。在不损失精确性的情况下，长度越短越好。<br><br><span style="font-weight: bold;">ref:</span> 此列显示使用哪个列或常数与key一起从表中选择行。<br><br><span style="font-weight: bold;">rows: </span>此列显示了MySQL认为它执行查询时必须检查的行数。<br><br><span style="font-weight: bold;">Extra:</span>&#12288;该列包含MySQL解决查询的详细信息。<br>&nbsp;&nbsp;&nbsp; (1).Distinct: 一旦MYSQL找到了与行相联合匹配的行，就不再搜索了。<br>&nbsp;&nbsp;&nbsp; (2).Not exists: MYSQL 优化了LEFT JOIN，一旦它找到了匹配LEFT JOIN标准的行，就不再搜索了。<br>&nbsp;&nbsp;&nbsp; (3).Range checked for each: Record（index map:#）没有找到理想的索引，因此对于从前面表中来的每一个行组合，MYSQL检查使用哪个索引，并用它来从表中返回行。这是使用索引的最慢的连接之一。<br>&nbsp;&nbsp;&nbsp; (4).Using filesort: MYSQL需要进行额外的步骤来发现如何对返回的行排序。它根据连接类型以及存储排序键值和匹配条件的全部行的行指针来排序全部行。<br>&nbsp;&nbsp;&nbsp; (5).Using index: 列数据是从仅仅使用了索引中的信息而没有读取实际的行动的表返回的，这发生在对表的全部的请求列都是同一个索引的部分的时候。<br>&nbsp;&nbsp;&nbsp; (6).Using temporary: 看到这个的时候，查询需要优化了。这里，MYSQL需要创建一个临时表来存储结果，这通常发生在对不同的列集进行ORDER BY上，而不是GROUP BY上。<br>&nbsp;&nbsp;&nbsp; (7).Using where: 使用了WHERE从句来限制哪些行将与下一张表匹配或者是返回给用户。如果不想返回表中的全部行，并且连接类型ALL或index，这就会发生，或者是查询有问题。<br>&nbsp;&nbsp;&nbsp; <br>上面的解释，不必全部看懂，有些可以一带而过，因为确实有些抽象，有些我也只是摘抄，但是下面我们用几个具体的实例来更加深入地理解一下。<br><br>
<div class="hl-surround">
<div class="hl-main"><span style="color: Blue;">mysql</span><span style="color: Gray;">&gt; </span><span style="color: Blue;">explain</span><span style="color: Gray;"> </span><span style="color: Blue;">select</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">,</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;">,</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;"> </span><span style="color: Blue;">from</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_content</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">,</span><span style="color: Blue;">jos_categories</span><span style="color: Gray;"> </span><span style="color: Blue;">B</span><span style="color: Gray;"> </span><span style="color: Blue;">where</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;">=</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">;<br>+----+-------------+-------+--------+---------------+---------+---------+---------------------+-------+-------------+<br>| </span><span style="color: Blue;">id</span><span style="color: Gray;"> | </span><span style="color: Blue;">select_type</span><span style="color: Gray;"> | </span><span style="color: Blue;">table</span><span style="color: Gray;"> | </span><span style="color: Blue;">type</span><span style="color: Gray;">&nbsp; &nbsp;| </span><span style="color: Blue;">possible_keys</span><span style="color: Gray;"> | </span><span style="color: Blue;">key</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">key_len</span><span style="color: Gray;"> | </span><span style="color: Blue;">ref</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">rows</span><span style="color: Gray;">&nbsp; | </span><span style="color: Blue;">Extra</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;|<br>+----+-------------+-------+--------+---------------+---------+---------+---------------------+-------+-------------+<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">A</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">ALL</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Maroon;">46585</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">B</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">eq_ref</span><span style="color: Gray;"> | </span><span style="color: Blue;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">PRIMARY</span><span style="color: Gray;"> | </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">joomla_test</span><span style="color: Gray;">.</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp;</span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">Using</span><span style="color: Gray;"> </span><span style="color: Blue;">where</span><span style="color: Gray;"> |<br>+----+-------------+-------+--------+---------------+---------+---------+---------------------+-------+-------------+<br></span><span style="color: Maroon;">2</span><span style="color: Gray;"> </span><span style="color: Blue;">rows</span><span style="color: Gray;"> </span><span style="color: Blue;">in</span><span style="color: Gray;"> </span><span style="color: Blue;">set</span><span style="color: Gray;"> </span><span style="color: Olive;">(</span><span style="color: Maroon;">0.00</span><span style="color: Gray;"> </span><span style="color: Blue;">sec</span><span style="color: Olive;">)</span><span style="color: Gray;"></span></div>
</div>
<br><br>这个是我们经常使用的一种查询方式，对B表的联接类型使用了eq_ref，索引使用了PRIMARY，但是对于A表，却没有使用任何索引，这可能不是我们想要的。<br>查看以上SQL语句，我们可能会想到，有必要给A.catid加个索引了。<br><br>
<div class="hl-surround">
<div class="hl-main"><span style="color: Blue;">mysql</span><span style="color: Gray;">&gt; </span><span style="color: Green;">alter</span><span style="color: Gray;"> </span><span style="color: Green;">table</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_content</span><span style="color: Gray;"> </span><span style="color: Green;">add</span><span style="color: Gray;"> </span><span style="color: Green;">index</span><span style="color: Gray;"> </span><span style="color: Blue;">idx_catid</span><span style="color: Olive;">(</span><span style="color: #8b0000;">`</span><span style="color: Blue;">catid</span><span style="color: #8b0000;">`</span><span style="color: Olive;">)</span><span style="color: Gray;">;<br></span><span style="color: Blue;">Query</span><span style="color: Gray;"> </span><span style="color: Blue;">OK</span><span style="color: Gray;">, </span><span style="color: Maroon;">46585</span><span style="color: Gray;"> </span><span style="color: Green;">rows</span><span style="color: Gray;"> </span><span style="color: Blue;">affected</span><span style="color: Gray;"> </span><span style="color: Olive;">(</span><span style="color: Maroon;">0.75</span><span style="color: Gray;"> </span><span style="color: Blue;">sec</span><span style="color: Olive;">)</span><span style="color: Gray;"><br></span><span style="color: Blue;">Records</span><span style="color: Gray;">: </span><span style="color: Maroon;">46585</span><span style="color: Gray;">&nbsp; </span><span style="color: Blue;">Duplicates</span><span style="color: Gray;">: </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; </span><span style="color: Blue;">Warnings</span><span style="color: Gray;">: </span><span style="color: Maroon;">0</span><span style="color: Gray;"><br>&nbsp;<br></span><span style="color: Blue;">mysql</span><span style="color: Gray;">&gt; </span><span style="color: Green;">explain</span><span style="color: Gray;"> </span><span style="color: Green;">select</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">,</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;">,</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;"> </span><span style="color: Green;">from</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_content</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">,</span><span style="color: Blue;">jos_categories</span><span style="color: Gray;"> </span><span style="color: Blue;">B</span><span style="color: Gray;"> </span><span style="color: Green;">where</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;">=</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">;<br>+----+-------------+-------+--------+---------------+---------+---------+---------------------+-------+-------------+<br>| </span><span style="color: Blue;">id</span><span style="color: Gray;"> | </span><span style="color: Blue;">select_type</span><span style="color: Gray;"> | </span><span style="color: Green;">table</span><span style="color: Gray;"> | </span><span style="color: Green;">type</span><span style="color: Gray;">&nbsp; &nbsp;| </span><span style="color: Blue;">possible_keys</span><span style="color: Gray;"> | </span><span style="color: Green;">key</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">key_len</span><span style="color: Gray;"> | </span><span style="color: Blue;">ref</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">rows</span><span style="color: Gray;">&nbsp; | </span><span style="color: Blue;">Extra</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;|<br>+----+-------------+-------+--------+---------------+---------+---------+---------------------+-------+-------------+<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">A</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">ALL</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Blue;">idx_catid</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Maroon;">46585</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">B</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">eq_ref</span><span style="color: Gray;"> | </span><span style="color: Green;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">PRIMARY</span><span style="color: Gray;"> | </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">joomla_test</span><span style="color: Gray;">.</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp;</span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Green;">Using</span><span style="color: Gray;"> </span><span style="color: Green;">where</span><span style="color: Gray;"> |<br>+----+-------------+-------+--------+---------------+---------+---------+---------------------+-------+-------------+<br></span><span style="color: Maroon;">2</span><span style="color: Gray;"> </span><span style="color: Green;">rows</span><span style="color: Gray;"> </span><span style="color: Green;">in</span><span style="color: Gray;"> </span><span style="color: Blue;">set</span><span style="color: Gray;"> </span><span style="color: Olive;">(</span><span style="color: Maroon;">0.00</span><span style="color: Gray;"> </span><span style="color: Blue;">sec</span><span style="color: Olive;">)</span></div>
</div>
<br><br>这样表A便使用了idx_catid索引。<br><br>下面我们做一次三个表的联合查询<br>
<div class="hl-surround">
<div class="hl-main"><span style="color: Blue;">mysql</span><span style="color: Gray;">&gt; </span><span style="color: Green;">explain</span><span style="color: Gray;"> </span><span style="color: Green;">select</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">,</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;">,</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;"> </span><span style="color: Green;">from</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_content</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">,</span><span style="color: Blue;">jos_categories</span><span style="color: Gray;"> </span><span style="color: Blue;">B</span><span style="color: Gray;">,</span><span style="color: Blue;">jos_sections</span><span style="color: Gray;"> </span><span style="color: Blue;">C</span><span style="color: Gray;"> </span><span style="color: Green;">where</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;">=</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;"> </span><span style="color: Green;">and</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">sectionid</span><span style="color: Gray;">=</span><span style="color: Blue;">C</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">;<br>+----+-------------+-------+--------+---------------+---------+---------+---------------------+-------+--------------------------------+<br>| </span><span style="color: Blue;">id</span><span style="color: Gray;"> | </span><span style="color: Blue;">select_type</span><span style="color: Gray;"> | </span><span style="color: Green;">table</span><span style="color: Gray;"> | </span><span style="color: Green;">type</span><span style="color: Gray;">&nbsp; &nbsp;| </span><span style="color: Blue;">possible_keys</span><span style="color: Gray;"> | </span><span style="color: Green;">key</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">key_len</span><span style="color: Gray;"> | </span><span style="color: Blue;">ref</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">rows</span><span style="color: Gray;">&nbsp; | </span><span style="color: Blue;">Extra</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>+----+-------------+-------+--------+---------------+---------+---------+---------------------+-------+--------------------------------+<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">C</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">index</span><span style="color: Gray;">&nbsp; | </span><span style="color: Green;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">PRIMARY</span><span style="color: Gray;"> | </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp;</span><span style="color: Maroon;">2</span><span style="color: Gray;"> | </span><span style="color: Green;">Using</span><span style="color: Gray;"> </span><span style="color: Green;">index</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">A</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">ALL</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Blue;">idx_catid</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Maroon;">46585</span><span style="color: Gray;"> | </span><span style="color: Green;">Using</span><span style="color: Gray;"> </span><span style="color: Green;">where</span><span style="color: Gray;">; </span><span style="color: Green;">Using</span><span style="color: Gray;"> </span><span style="color: Green;">join</span><span style="color: Gray;"> </span><span style="color: Blue;">buffer</span><span style="color: Gray;"> |<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">B</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">eq_ref</span><span style="color: Gray;"> | </span><span style="color: Green;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">PRIMARY</span><span style="color: Gray;"> | </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">joomla_test</span><span style="color: Gray;">.</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp;</span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Green;">Using</span><span style="color: Gray;"> </span><span style="color: Green;">where</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>+----+-------------+-------+--------+---------------+---------+---------+---------------------+-------+--------------------------------+<br></span><span style="color: Maroon;">3</span><span style="color: Gray;"> </span><span style="color: Green;">rows</span><span style="color: Gray;"> </span><span style="color: Green;">in</span><span style="color: Gray;"> </span><span style="color: Blue;">set</span><span style="color: Gray;"> </span><span style="color: Olive;">(</span><span style="color: Maroon;">0.00</span><span style="color: Gray;"> </span><span style="color: Blue;">sec</span><span style="color: Olive;">)</span></div>
</div>
<br><br>这里显示了Mysql先将C表读入查询，并使用PRIMARY索引，然后联合A表进行查询，这时候type显示的是ALL，可以用的索引有idx_catid，但是实际没有用。<br>原因非常明显，因为使用的连接条件是A.sectionid=C.id，所以我们给A.sectionid加个索引先。<br><br>
<div class="hl-surround">
<div class="hl-main"><span style="color: Blue;">mysql</span><span style="color: Gray;">&gt; </span><span style="color: Green;">alter</span><span style="color: Gray;"> </span><span style="color: Green;">table</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_content</span><span style="color: Gray;"> </span><span style="color: Green;">add</span><span style="color: Gray;"> </span><span style="color: Green;">index</span><span style="color: Gray;"> </span><span style="color: Blue;">idx_section</span><span style="color: Olive;">(</span><span style="color: #8b0000;">`</span><span style="color: Blue;">sectionid</span><span style="color: #8b0000;">`</span><span style="color: Olive;">)</span><span style="color: Gray;">;<br></span><span style="color: Blue;">Query</span><span style="color: Gray;"> </span><span style="color: Blue;">OK</span><span style="color: Gray;">, </span><span style="color: Maroon;">46585</span><span style="color: Gray;"> </span><span style="color: Green;">rows</span><span style="color: Gray;"> </span><span style="color: Blue;">affected</span><span style="color: Gray;"> </span><span style="color: Olive;">(</span><span style="color: Maroon;">0.89</span><span style="color: Gray;"> </span><span style="color: Blue;">sec</span><span style="color: Olive;">)</span><span style="color: Gray;"><br></span><span style="color: Blue;">Records</span><span style="color: Gray;">: </span><span style="color: Maroon;">46585</span><span style="color: Gray;">&nbsp; </span><span style="color: Blue;">Duplicates</span><span style="color: Gray;">: </span><span style="color: Maroon;">0</span><span style="color: Gray;">&nbsp; </span><span style="color: Blue;">Warnings</span><span style="color: Gray;">: </span><span style="color: Maroon;">0</span><span style="color: Gray;"><br>&nbsp;<br></span><span style="color: Blue;">mysql</span><span style="color: Gray;">&gt; </span><span style="color: Green;">explain</span><span style="color: Gray;"> </span><span style="color: Green;">select</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">,</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;">,</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;"> </span><span style="color: Green;">from</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_content</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">,</span><span style="color: Blue;">jos_categories</span><span style="color: Gray;"> </span><span style="color: Blue;">B</span><span style="color: Gray;">,</span><span style="color: Blue;">jos_sections</span><span style="color: Gray;"> </span><span style="color: Blue;">C</span><span style="color: Gray;"> </span><span style="color: Green;">where</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;">=</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;"> </span><span style="color: Green;">and</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">sectionid</span><span style="color: Gray;">=</span><span style="color: Blue;">C</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">;<br>+----+-------------+-------+--------+-----------------------+-------------+---------+---------------------+-------+-------------+<br>| </span><span style="color: Blue;">id</span><span style="color: Gray;"> | </span><span style="color: Blue;">select_type</span><span style="color: Gray;"> | </span><span style="color: Green;">table</span><span style="color: Gray;"> | </span><span style="color: Green;">type</span><span style="color: Gray;">&nbsp; &nbsp;| </span><span style="color: Blue;">possible_keys</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">key</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">key_len</span><span style="color: Gray;"> | </span><span style="color: Blue;">ref</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">rows</span><span style="color: Gray;">&nbsp; | </span><span style="color: Blue;">Extra</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;|<br>+----+-------------+-------+--------+-----------------------+-------------+---------+---------------------+-------+-------------+<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">C</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">index</span><span style="color: Gray;">&nbsp; | </span><span style="color: Green;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp;</span><span style="color: Maroon;">2</span><span style="color: Gray;"> | </span><span style="color: Green;">Using</span><span style="color: Gray;"> </span><span style="color: Green;">index</span><span style="color: Gray;"> |<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">A</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">ref</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Blue;">idx_catid</span><span style="color: Gray;">,</span><span style="color: Blue;">idx_section</span><span style="color: Gray;"> | </span><span style="color: Blue;">idx_section</span><span style="color: Gray;"> | </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">joomla_test</span><span style="color: Gray;">.</span><span style="color: Blue;">C</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Maroon;">23293</span><span style="color: Gray;"> | </span><span style="color: Green;">Using</span><span style="color: Gray;"> </span><span style="color: Green;">where</span><span style="color: Gray;"> |<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">B</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">eq_ref</span><span style="color: Gray;"> | </span><span style="color: Green;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">joomla_test</span><span style="color: Gray;">.</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp;</span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Green;">Using</span><span style="color: Gray;"> </span><span style="color: Green;">where</span><span style="color: Gray;"> |<br>+----+-------------+-------+--------+-----------------------+-------------+---------+---------------------+-------+-------------+<br></span><span style="color: Maroon;">3</span><span style="color: Gray;"> </span><span style="color: Green;">rows</span><span style="color: Gray;"> </span><span style="color: Green;">in</span><span style="color: Gray;"> </span><span style="color: Blue;">set</span><span style="color: Gray;"> </span><span style="color: Olive;">(</span><span style="color: Maroon;">0.00</span><span style="color: Gray;"> </span><span style="color: Blue;">sec</span><span style="color: Olive;">)</span></div>
</div>
<br><br>这时候显示结果告诉我们，效果很明显，在连接A表时type变成了ref，索引使用了idx_section，如果我们注意看后两列，对A表的查询结果后一次明显少了一半左右，而且没有用到join buffer。<br>这个表读入的顺序是Mysql优化器帮我们做的，可以得知，用记录数少的表做为基础表进行联合，将会得到更高的效率。<br><br>对于上面的语句，我们换一种写法<br><br>
<div class="hl-surround">
<div class="hl-main"><span style="color: Blue;">mysql</span><span style="color: Gray;">&gt; </span><span style="color: Green;">explain</span><span style="color: Gray;"> </span><span style="color: Green;">select</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">,</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;">,</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;"> </span><span style="color: Green;">from</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_content</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;"> </span><span style="color: Green;">left</span><span style="color: Gray;"> </span><span style="color: Green;">join</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_categories</span><span style="color: Gray;"> </span><span style="color: Blue;">B</span><span style="color: Gray;"> </span><span style="color: Green;">on</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;">=</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;"> </span><span style="color: Green;">left</span><span style="color: Gray;"> </span><span style="color: Green;">join</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_sections</span><span style="color: Gray;"> </span><span style="color: Blue;">C</span><span style="color: Gray;"> </span><span style="color: Green;">on</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">sectionid</span><span style="color: Gray;">=</span><span style="color: Blue;">C</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">;<br>+----+-------------+-------+--------+---------------+---------+---------+-------------------------+-------+-------------+<br>| </span><span style="color: Blue;">id</span><span style="color: Gray;"> | </span><span style="color: Blue;">select_type</span><span style="color: Gray;"> | </span><span style="color: Green;">table</span><span style="color: Gray;"> | </span><span style="color: Green;">type</span><span style="color: Gray;">&nbsp; &nbsp;| </span><span style="color: Blue;">possible_keys</span><span style="color: Gray;"> | </span><span style="color: Green;">key</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">key_len</span><span style="color: Gray;"> | </span><span style="color: Blue;">ref</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">rows</span><span style="color: Gray;">&nbsp; | </span><span style="color: Blue;">Extra</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;|<br>+----+-------------+-------+--------+---------------+---------+---------+-------------------------+-------+-------------+<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">A</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">ALL</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Maroon;">46585</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">B</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">eq_ref</span><span style="color: Gray;"> | </span><span style="color: Green;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">PRIMARY</span><span style="color: Gray;"> | </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">joomla_test</span><span style="color: Gray;">.</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;</span><span style="color: Maroon;">1</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">C</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">eq_ref</span><span style="color: Gray;"> | </span><span style="color: Green;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">PRIMARY</span><span style="color: Gray;"> | </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">joomla_test</span><span style="color: Gray;">.</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">sectionid</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp;</span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Green;">Using</span><span style="color: Gray;"> </span><span style="color: Green;">index</span><span style="color: Gray;"> |<br>+----+-------------+-------+--------+---------------+---------+---------+-------------------------+-------+-------------+<br></span><span style="color: Maroon;">3</span><span style="color: Gray;"> </span><span style="color: Green;">rows</span><span style="color: Gray;"> </span><span style="color: Green;">in</span><span style="color: Gray;"> </span><span style="color: Blue;">set</span><span style="color: Gray;"> </span><span style="color: Olive;">(</span><span style="color: Maroon;">0.00</span><span style="color: Gray;"> </span><span style="color: Blue;">sec</span><span style="color: Olive;">)</span></div>
</div>
<br><br>Mysql
读入表的顺序被改变了，这意味着，如果我们用left
join来做连接查询，Mysql会按SQL语句中表出现的顺序读入，还有一个有变化的地方是联接B和C的type都变成了eq_ref，前边我们说过，
这样说明Mysql可以找到唯一的行，这个效率是比ref要高的。<br><br>再来看一个排序的例子：<br><br>
<div class="hl-surround">
<div class="hl-main"><span style="color: Blue;">mysql</span><span style="color: Gray;">&gt; </span><span style="color: Blue;">explain</span><span style="color: Gray;"> </span><span style="color: Blue;">select</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">,</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;">,</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;"> </span><span style="color: Blue;">from</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_content</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;"> </span><span style="color: Blue;">left</span><span style="color: Gray;"> </span><span style="color: Blue;">join</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_categories</span><span style="color: Gray;"> </span><span style="color: Blue;">B</span><span style="color: Gray;"> </span><span style="color: Blue;">on</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;">=</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;"> </span><span style="color: Blue;">left</span><span style="color: Gray;"> </span><span style="color: Blue;">join</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_sections</span><span style="color: Gray;"> </span><span style="color: Blue;">C</span><span style="color: Gray;"> </span><span style="color: Blue;">on</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">sectionid</span><span style="color: Gray;">=</span><span style="color: Blue;">C</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;"> </span><span style="color: Blue;">order</span><span style="color: Gray;"> </span><span style="color: Blue;">by</span><span style="color: Gray;"> </span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">;<br>+----+-------------+-------+--------+---------------+---------+---------+-------------------------+-------+---------------------------------+<br>| </span><span style="color: Blue;">id</span><span style="color: Gray;"> | </span><span style="color: Blue;">select_type</span><span style="color: Gray;"> | </span><span style="color: Blue;">table</span><span style="color: Gray;"> | </span><span style="color: Blue;">type</span><span style="color: Gray;">&nbsp; &nbsp;| </span><span style="color: Blue;">possible_keys</span><span style="color: Gray;"> | </span><span style="color: Blue;">key</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">key_len</span><span style="color: Gray;"> | </span><span style="color: Blue;">ref</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">rows</span><span style="color: Gray;">&nbsp; | </span><span style="color: Blue;">Extra</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br>+----+-------------+-------+--------+---------------+---------+---------+-------------------------+-------+---------------------------------+<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">A</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">ALL</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Maroon;">46585</span><span style="color: Gray;"> | </span><span style="color: Blue;">Using</span><span style="color: Gray;"> </span><span style="color: Blue;">temporary</span><span style="color: Gray;">; </span><span style="color: Blue;">Using</span><span style="color: Gray;"> </span><span style="color: Blue;">filesort</span><span style="color: Gray;"> |<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">B</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">eq_ref</span><span style="color: Gray;"> | </span><span style="color: Blue;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">PRIMARY</span><span style="color: Gray;"> | </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">joomla_test</span><span style="color: Gray;">.</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;</span><span style="color: Maroon;">1</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">C</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">eq_ref</span><span style="color: Gray;"> | </span><span style="color: Blue;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">PRIMARY</span><span style="color: Gray;"> | </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">joomla_test</span><span style="color: Gray;">.</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">sectionid</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp;</span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">Using</span><span style="color: Gray;"> </span><span style="color: Blue;">index</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br>+----+-------------+-------+--------+---------------+---------+---------+-------------------------+-------+---------------------------------+<br></span><span style="color: Maroon;">3</span><span style="color: Gray;"> </span><span style="color: Blue;">rows</span><span style="color: Gray;"> </span><span style="color: Blue;">in</span><span style="color: Gray;"> </span><span style="color: Blue;">set</span><span style="color: Gray;"> </span><span style="color: Olive;">(</span><span style="color: Maroon;">0.00</span><span style="color: Gray;"> </span><span style="color: Blue;">sec</span><span style="color: Olive;">)</span><span style="color: Gray;"><br>&nbsp;<br></span><span style="color: Blue;">mysql</span><span style="color: Gray;">&gt; </span><span style="color: Blue;">explain</span><span style="color: Gray;"> </span><span style="color: Blue;">select</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">,</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;">,</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;"> </span><span style="color: Blue;">from</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_content</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;"> </span><span style="color: Blue;">left</span><span style="color: Gray;"> </span><span style="color: Blue;">join</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_categories</span><span style="color: Gray;"> </span><span style="color: Blue;">B</span><span style="color: Gray;"> </span><span style="color: Blue;">on</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;">=</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;"> </span><span style="color: Blue;">left</span><span style="color: Gray;"> </span><span style="color: Blue;">join</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_sections</span><span style="color: Gray;"> </span><span style="color: Blue;">C</span><span style="color: Gray;"> </span><span style="color: Blue;">on</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">sectionid</span><span style="color: Gray;">=</span><span style="color: Blue;">C</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;"> </span><span style="color: Blue;">order</span><span style="color: Gray;"> </span><span style="color: Blue;">by</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">;<br>+----+-------------+-------+--------+---------------+---------+---------+-------------------------+-------+----------------+<br>| </span><span style="color: Blue;">id</span><span style="color: Gray;"> | </span><span style="color: Blue;">select_type</span><span style="color: Gray;"> | </span><span style="color: Blue;">table</span><span style="color: Gray;"> | </span><span style="color: Blue;">type</span><span style="color: Gray;">&nbsp; &nbsp;| </span><span style="color: Blue;">possible_keys</span><span style="color: Gray;"> | </span><span style="color: Blue;">key</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">key_len</span><span style="color: Gray;"> | </span><span style="color: Blue;">ref</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">rows</span><span style="color: Gray;">&nbsp; | </span><span style="color: Blue;">Extra</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>+----+-------------+-------+--------+---------------+---------+---------+-------------------------+-------+----------------+<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">A</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">ALL</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Maroon;">46585</span><span style="color: Gray;"> | </span><span style="color: Blue;">Using</span><span style="color: Gray;"> </span><span style="color: Blue;">filesort</span><span style="color: Gray;"> |<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">B</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">eq_ref</span><span style="color: Gray;"> | </span><span style="color: Blue;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">PRIMARY</span><span style="color: Gray;"> | </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">joomla_test</span><span style="color: Gray;">.</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp;</span><span style="color: Maroon;">1</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">C</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">eq_ref</span><span style="color: Gray;"> | </span><span style="color: Blue;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">PRIMARY</span><span style="color: Gray;"> | </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">joomla_test</span><span style="color: Gray;">.</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">sectionid</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp;</span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">Using</span><span style="color: Gray;"> </span><span style="color: Blue;">index</span><span style="color: Gray;">&nbsp; &nbsp; |<br>+----+-------------+-------+--------+---------------+---------+---------+-------------------------+-------+----------------+</span></div>
</div>
<br><br>对于上面两条语句，只是修改了一下排序字段，而第一个使用了Using temporary，而第二个却没有。在日常的网站维护中，如果有Using temporary出现，说明需要做一些优化措施了。<br>而为什么第一个用了临时表，而第二个没有用呢？<br>因为如果有ORDER BY子句和一个不同的GROUP BY子句，或者如果ORDER BY或GROUP BY中的字段都来自其他的表而非连接顺序中的第一个表的话，就会创建一个临时表了。<br>那么，对于上面例子中的第一条语句，我们需要对jos_categories的id进行排序，可以将SQL做如下改动：<br><br>
<div class="hl-surround">
<div class="hl-main"><span style="color: Blue;">mysql</span><span style="color: Gray;">&gt; </span><span style="color: Green;">explain</span><span style="color: Gray;"> </span><span style="color: Green;">select</span><span style="color: Gray;"> </span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">,</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;">,</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;"> </span><span style="color: Green;">from</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_categories</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;"> </span><span style="color: Green;">left</span><span style="color: Gray;"> </span><span style="color: Green;">join</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_content</span><span style="color: Gray;"> </span><span style="color: Blue;">B</span><span style="color: Gray;"> </span><span style="color: Green;">on</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">=</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;"> </span><span style="color: Green;">left</span><span style="color: Gray;"> </span><span style="color: Green;">join</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_sections</span><span style="color: Gray;"> </span><span style="color: Blue;">C</span><span style="color: Gray;"> </span><span style="color: Green;">on</span><span style="color: Gray;"> </span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">sectionid</span><span style="color: Gray;">=</span><span style="color: Blue;">C</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;"> </span><span style="color: Green;">order</span><span style="color: Gray;"> </span><span style="color: Green;">by</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">;<br>+----+-------------+-------+--------+---------------+-----------+---------+-------------------------+------+----------------+<br>| </span><span style="color: Blue;">id</span><span style="color: Gray;"> | </span><span style="color: Blue;">select_type</span><span style="color: Gray;"> | </span><span style="color: Green;">table</span><span style="color: Gray;"> | </span><span style="color: Green;">type</span><span style="color: Gray;">&nbsp; &nbsp;| </span><span style="color: Blue;">possible_keys</span><span style="color: Gray;"> | </span><span style="color: Green;">key</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">key_len</span><span style="color: Gray;"> | </span><span style="color: Blue;">ref</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">rows</span><span style="color: Gray;"> | </span><span style="color: Blue;">Extra</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>+----+-------------+-------+--------+---------------+-----------+---------+-------------------------+------+----------------+<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">A</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">ALL</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp;</span><span style="color: Maroon;">18</span><span style="color: Gray;"> | </span><span style="color: Green;">Using</span><span style="color: Gray;"> </span><span style="color: Blue;">filesort</span><span style="color: Gray;"> |<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">B</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">ref</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Blue;">idx_catid</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">idx_catid</span><span style="color: Gray;"> | </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">joomla_test</span><span style="color: Gray;">.</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Maroon;">3328</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">C</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">eq_ref</span><span style="color: Gray;"> | </span><span style="color: Green;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp;| </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">joomla_test</span><span style="color: Gray;">.</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">sectionid</span><span style="color: Gray;"> |&nbsp; &nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Green;">Using</span><span style="color: Gray;"> </span><span style="color: Green;">index</span><span style="color: Gray;">&nbsp; &nbsp; |<br>+----+-------------+-------+--------+---------------+-----------+---------+-------------------------+------+----------------+<br></span><span style="color: Maroon;">3</span><span style="color: Gray;"> </span><span style="color: Green;">rows</span><span style="color: Gray;"> </span><span style="color: Green;">in</span><span style="color: Gray;"> </span><span style="color: Blue;">set</span><span style="color: Gray;"> </span><span style="color: Olive;">(</span><span style="color: Maroon;">0.00</span><span style="color: Gray;"> </span><span style="color: Blue;">sec</span><span style="color: Olive;">)</span></div>
</div>
<br><br>这样我们发现，不会再有Using temporary了，而且在查询jos_content时，查询的记录明显有了数量级的降低，这是因为jos_content的idx_catid起了作用。<br>所以结论是：<span style="font-weight: bold; color: #ff0000;">尽量对第一个表的索引键进行排序，这样效率是高的。</span><br><br><span style="font-weight: bold; color: #ff0000;">我们还会发现，在排序的语句中都出现了Using filesort，字面意思可能会被理解为：使用文件进行排序或中文件中进行排序。实际上这是不正确的，这是一个让人产生误解的词语。</span><br style="font-weight: bold; color: #ff0000;"><span style="font-weight: bold; color: #ff0000;">当我们试图对一个没有索引的字段进行排序时，就是filesoft。它跟文件没有任何关系，实际上是内部的一个快速排序。</span><br><br>然而，当我们回过头来再看上面运行过的一个SQL的时候会有以下发现：<br><br>
<div class="hl-surround">
<div class="hl-main"><span style="color: Blue;">mysql</span><span style="color: Gray;">&gt; </span><span style="color: Green;">explain</span><span style="color: Gray;"> </span><span style="color: Green;">select</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">,</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;">,</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;"> </span><span style="color: Green;">from</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_content</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">,</span><span style="color: Blue;">jos_categories</span><span style="color: Gray;"> </span><span style="color: Blue;">B</span><span style="color: Gray;">,</span><span style="color: Blue;">jos_sections</span><span style="color: Gray;"> </span><span style="color: Blue;">C</span><span style="color: Gray;"> </span><span style="color: Green;">where</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;">=</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;"> </span><span style="color: Green;">and</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">sectionid</span><span style="color: Gray;">=</span><span style="color: Blue;">C</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;"> </span><span style="color: Green;">order</span><span style="color: Gray;"> </span><span style="color: Green;">by</span><span style="color: Gray;"> </span><span style="color: Blue;">C</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">;<br>+----+-------------+-------+--------+-----------------------+-------------+---------+---------------------+-------+-------------+<br>| </span><span style="color: Blue;">id</span><span style="color: Gray;"> | </span><span style="color: Blue;">select_type</span><span style="color: Gray;"> | </span><span style="color: Green;">table</span><span style="color: Gray;"> | </span><span style="color: Green;">type</span><span style="color: Gray;">&nbsp; &nbsp;| </span><span style="color: Blue;">possible_keys</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">key</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">key_len</span><span style="color: Gray;"> | </span><span style="color: Blue;">ref</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">rows</span><span style="color: Gray;">&nbsp; | </span><span style="color: Blue;">Extra</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;|<br>+----+-------------+-------+--------+-----------------------+-------------+---------+---------------------+-------+-------------+<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">C</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">index</span><span style="color: Gray;">&nbsp; | </span><span style="color: Green;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp;</span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Green;">Using</span><span style="color: Gray;"> </span><span style="color: Green;">index</span><span style="color: Gray;"> |<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">A</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">ref</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Blue;">idx_catid</span><span style="color: Gray;">,</span><span style="color: Blue;">idx_section</span><span style="color: Gray;"> | </span><span style="color: Blue;">idx_section</span><span style="color: Gray;"> | </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">joomla_test</span><span style="color: Gray;">.</span><span style="color: Blue;">C</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">&nbsp; &nbsp; | </span><span style="color: Maroon;">23293</span><span style="color: Gray;"> | </span><span style="color: Green;">Using</span><span style="color: Gray;"> </span><span style="color: Green;">where</span><span style="color: Gray;"> |<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">B</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">eq_ref</span><span style="color: Gray;"> | </span><span style="color: Green;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">joomla_test</span><span style="color: Gray;">.</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp;</span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Green;">Using</span><span style="color: Gray;"> </span><span style="color: Green;">where</span><span style="color: Gray;"> |<br>+----+-------------+-------+--------+-----------------------+-------------+---------+---------------------+-------+-------------+<br></span><span style="color: Maroon;">3</span><span style="color: Gray;"> </span><span style="color: Green;">rows</span><span style="color: Gray;"> </span><span style="color: Green;">in</span><span style="color: Gray;"> </span><span style="color: Blue;">set</span><span style="color: Gray;"> </span><span style="color: Olive;">(</span><span style="color: Maroon;">0.00</span><span style="color: Gray;"> </span><span style="color: Blue;">sec</span><span style="color: Olive;">)</span></div>
</div>
<br><br>这是我们刚才运行过的一条语句，只是加了一个排序，而这条语句中C表的主键对排序起了作用，我们会发现Using filesort没有了。<br>而尽管在上面的语句中也是对第一个表的主键进行排序，却没有得到想要的效果（第一个表的主键没有用到），这是为什么呢？实际上以上运行过的所有left join的语句中，第一个表的索引都没有用到，尽管对第一个表的主键进行了排序也无济于事。不免有些奇怪！<br><br>于是我们继续测试了下一条SQL：<br><br>
<div class="hl-surround">
<div class="hl-main"><span style="color: Blue;">mysql</span><span style="color: Gray;">&gt; </span><span style="color: Blue;">explain</span><span style="color: Gray;"> </span><span style="color: Blue;">select</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">,</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;">,</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;"> </span><span style="color: Blue;">from</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_content</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;"> </span><span style="color: Blue;">left</span><span style="color: Gray;"> </span><span style="color: Blue;">join</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_categories</span><span style="color: Gray;"> </span><span style="color: Blue;">B</span><span style="color: Gray;"> </span><span style="color: Blue;">on</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;">=</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;"> </span><span style="color: Blue;">left</span><span style="color: Gray;"> </span><span style="color: Blue;">join</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_sections</span><span style="color: Gray;"> </span><span style="color: Blue;">C</span><span style="color: Gray;"> </span><span style="color: Blue;">on</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">sectionid</span><span style="color: Gray;">=</span><span style="color: Blue;">C</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;"> </span><span style="color: Blue;">where</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;"> &lt; </span><span style="color: Maroon;">100</span><span style="color: Gray;">;<br>+----+-------------+-------+--------+----------------+---------+---------+-------------------------+------+-------------+<br>| </span><span style="color: Blue;">id</span><span style="color: Gray;"> | </span><span style="color: Blue;">select_type</span><span style="color: Gray;"> | </span><span style="color: Blue;">table</span><span style="color: Gray;"> | </span><span style="color: Blue;">type</span><span style="color: Gray;">&nbsp; &nbsp;| </span><span style="color: Blue;">possible_keys</span><span style="color: Gray;">&nbsp; | </span><span style="color: Blue;">key</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">key_len</span><span style="color: Gray;"> | </span><span style="color: Blue;">ref</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">rows</span><span style="color: Gray;"> | </span><span style="color: Blue;">Extra</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;|<br>+----+-------------+-------+--------+----------------+---------+---------+-------------------------+------+-------------+<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">A</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">range</span><span style="color: Gray;">&nbsp; | </span><span style="color: Blue;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">PRIMARY</span><span style="color: Gray;"> | </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp;</span><span style="color: Maroon;">90</span><span style="color: Gray;"> | </span><span style="color: Blue;">Using</span><span style="color: Gray;"> </span><span style="color: Blue;">where</span><span style="color: Gray;"> |<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">B</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">eq_ref</span><span style="color: Gray;"> | </span><span style="color: Blue;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">PRIMARY</span><span style="color: Gray;"> | </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">joomla_test</span><span style="color: Gray;">.</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">C</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">eq_ref</span><span style="color: Gray;"> | </span><span style="color: Blue;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">PRIMARY</span><span style="color: Gray;"> | </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">joomla_test</span><span style="color: Gray;">.</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">sectionid</span><span style="color: Gray;"> |&nbsp; &nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">Using</span><span style="color: Gray;"> </span><span style="color: Blue;">index</span><span style="color: Gray;"> |<br>+----+-------------+-------+--------+----------------+---------+---------+-------------------------+------+-------------+<br></span><span style="color: Maroon;">3</span><span style="color: Gray;"> </span><span style="color: Blue;">rows</span><span style="color: Gray;"> </span><span style="color: Blue;">in</span><span style="color: Gray;"> </span><span style="color: Blue;">set</span><span style="color: Gray;"> </span><span style="color: Olive;">(</span><span style="color: Maroon;">0.05</span><span style="color: Gray;"> </span><span style="color: Blue;">sec</span><span style="color: Olive;">)</span><span style="color: Gray;"></span></div>
</div>
<br><br>然后，当再次进行排序操作的时候，Using filesoft也没有再出现<br><br>
<div class="hl-surround">
<div class="hl-main"><span style="color: Blue;">mysql</span><span style="color: Gray;">&gt; </span><span style="color: Blue;">explain</span><span style="color: Gray;"> </span><span style="color: Blue;">select</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">,</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;">,</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;"> </span><span style="color: Blue;">from</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_content</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;"> </span><span style="color: Blue;">left</span><span style="color: Gray;"> </span><span style="color: Blue;">join</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_categories</span><span style="color: Gray;"> </span><span style="color: Blue;">B</span><span style="color: Gray;"> </span><span style="color: Blue;">on</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;">=</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;"> </span><span style="color: Blue;">left</span><span style="color: Gray;"> </span><span style="color: Blue;">join</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_sections</span><span style="color: Gray;"> </span><span style="color: Blue;">C</span><span style="color: Gray;"> </span><span style="color: Blue;">on</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">sectionid</span><span style="color: Gray;">=</span><span style="color: Blue;">C</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;"> </span><span style="color: Blue;">where</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;"> &lt; </span><span style="color: Maroon;">100</span><span style="color: Gray;"> </span><span style="color: Blue;">order</span><span style="color: Gray;"> </span><span style="color: Blue;">by</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">;<br>+----+-------------+-------+--------+---------------+---------+---------+-------------------------+------+-------------+<br>| </span><span style="color: Blue;">id</span><span style="color: Gray;"> | </span><span style="color: Blue;">select_type</span><span style="color: Gray;"> | </span><span style="color: Blue;">table</span><span style="color: Gray;"> | </span><span style="color: Blue;">type</span><span style="color: Gray;">&nbsp; &nbsp;| </span><span style="color: Blue;">possible_keys</span><span style="color: Gray;"> | </span><span style="color: Blue;">key</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">key_len</span><span style="color: Gray;"> | </span><span style="color: Blue;">ref</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">rows</span><span style="color: Gray;"> | </span><span style="color: Blue;">Extra</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;|<br>+----+-------------+-------+--------+---------------+---------+---------+-------------------------+------+-------------+<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">A</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">range</span><span style="color: Gray;">&nbsp; | </span><span style="color: Blue;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">PRIMARY</span><span style="color: Gray;"> | </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Green;">NULL</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; </span><span style="color: Maroon;">105</span><span style="color: Gray;"> | </span><span style="color: Blue;">Using</span><span style="color: Gray;"> </span><span style="color: Blue;">where</span><span style="color: Gray;"> |<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">B</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">eq_ref</span><span style="color: Gray;"> | </span><span style="color: Blue;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">PRIMARY</span><span style="color: Gray;"> | </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">joomla_test</span><span style="color: Gray;">.</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br>|&nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">SIMPLE</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; | </span><span style="color: Blue;">C</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">eq_ref</span><span style="color: Gray;"> | </span><span style="color: Blue;">PRIMARY</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">PRIMARY</span><span style="color: Gray;"> | </span><span style="color: Maroon;">4</span><span style="color: Gray;">&nbsp; &nbsp; &nbsp; &nbsp;| </span><span style="color: Blue;">joomla_test</span><span style="color: Gray;">.</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">sectionid</span><span style="color: Gray;"> |&nbsp; &nbsp; </span><span style="color: Maroon;">1</span><span style="color: Gray;"> | </span><span style="color: Blue;">Using</span><span style="color: Gray;"> </span><span style="color: Blue;">index</span><span style="color: Gray;"> |<br>+----+-------------+-------+--------+---------------+---------+---------+-------------------------+------+-------------+<br></span><span style="color: Maroon;">3</span><span style="color: Gray;"> </span><span style="color: Blue;">rows</span><span style="color: Gray;"> </span><span style="color: Blue;">in</span><span style="color: Gray;"> </span><span style="color: Blue;">set</span><span style="color: Gray;"> </span><span style="color: Olive;">(</span><span style="color: Maroon;">0.00</span><span style="color: Gray;"> </span><span style="color: Blue;">sec</span><span style="color: Olive;">)</span><span style="color: Gray;"></span></div>
</div>
<br><br>这个结果表明：对where条件里涉及到的字段，Mysql会使用索引进行搜索，而这个索引的使用也对排序的效率有很好的提升。<br><br>写了段程序测试了一下，分别让以下两个SQL语句执行200次：<br>
<div class="hl-surround">
<ol title="Double click to hide line number." class="hl-main ln-show">
    <li class="hl-firstline"><span style="color: Green;">select</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">,</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;">,</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;"> </span><span style="color: Green;">from</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_content</span><span style="color: Gray;">&nbsp; </span><span style="color: Blue;">A</span><span style="color: Gray;"> </span><span style="color: Green;">left</span><span style="color: Gray;"> </span><span style="color: Green;">join</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_categories</span><span style="color: Gray;"> </span><span style="color: Blue;">B</span><span style="color: Gray;"> </span><span style="color: Green;">on</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;">=</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;"> </span><span style="color: Green;">left</span><span style="color: Gray;"> </span><span style="color: Green;">join</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_sections</span><span style="color: Gray;"> </span><span style="color: Blue;">C</span><span style="color: Gray;">&nbsp; </span><span style="color: Green;">on</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">sectionid</span><span style="color: Gray;">=</span><span style="color: Blue;">C</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span></li>
    <li><span style="color: Green;">select</span><span style="color: Gray;">&nbsp;</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">,</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;">,</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;"> </span><span style="color: Green;">from</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_content</span><span style="color: Gray;">&nbsp; </span><span style="color: Blue;">A</span><span style="color: Gray;">,</span><span style="color: Blue;">jos_categories</span><span style="color: Gray;"> </span><span style="color: Blue;">B</span><span style="color: Gray;">,</span><span style="color: Blue;">jos_sections</span><span style="color: Gray;"> </span><span style="color: Blue;">C</span><span style="color: Gray;"> </span><span style="color: Green;">where</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;">=</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;"> </span><span style="color: Green;">and</span><span style="color: Gray;">&nbsp; </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">sectionid</span><span style="color: Gray;">=</span><span style="color: Blue;">C</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span></li>
    <li><span style="color: Green;">select</span><span style="color: Gray;">&nbsp;</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">,</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;">,</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">title</span><span style="color: Gray;"> </span><span style="color: Green;">from</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_content</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;"> </span><span style="color: Green;">left</span><span style="color: Gray;">&nbsp; </span><span style="color: Green;">join</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_categories</span><span style="color: Gray;"> </span><span style="color: Blue;">B</span><span style="color: Gray;"> </span><span style="color: Green;">on</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;">=</span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;"> </span><span style="color: Green;">left</span><span style="color: Gray;"> </span><span style="color: Green;">join</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_sections</span><span style="color: Gray;"> </span><span style="color: Blue;">C</span><span style="color: Gray;"> </span><span style="color: Green;">on</span><span style="color: Gray;">&nbsp; </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">sectionid</span><span style="color: Gray;">=</span><span style="color: Blue;">C</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">&#12288;</span><span style="color: Green;">order</span><span style="color: Gray;"> </span><span style="color: Green;">by</span><span style="color: Gray;"> </span><span style="color: Green;">rand</span><span style="color: Olive;">()</span><span style="color: Gray;"> </span><span style="color: Green;">limit</span><span style="color: Gray;"> </span><span style="color: Maroon;">10</span></li>
    <li><span style="color: Green;">select</span><span style="color: Gray;">&nbsp;</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;"> </span><span style="color: Green;">from</span><span style="color: Gray;">&nbsp; </span><span style="color: Blue;">jos_content</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;"> </span><span style="color: Green;">left</span><span style="color: Gray;"> </span><span style="color: Green;">join</span><span style="color: Gray;"> </span><span style="color: Blue;">jos_categories</span><span style="color: Gray;"> </span><span style="color: Blue;">B</span><span style="color: Gray;"> </span><span style="color: Green;">on</span><span style="color: Gray;"> </span><span style="color: Blue;">B</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;">=</span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">catid</span><span style="color: Gray;"> </span><span style="color: Green;">left</span><span style="color: Gray;"> </span><span style="color: Green;">join</span><span style="color: Gray;">&nbsp; </span><span style="color: Blue;">jos_sections</span><span style="color: Gray;"> </span><span style="color: Blue;">C</span><span style="color: Gray;"> </span><span style="color: Green;">on</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">sectionid</span><span style="color: Gray;">=</span><span style="color: Blue;">C</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span><span style="color: Gray;"> </span><span style="color: Green;">order</span><span style="color: Gray;"> </span><span style="color: Green;">by</span><span style="color: Gray;"> </span><span style="color: Blue;">A</span><span style="color: Gray;">.</span><span style="color: Blue;">id</span></li>
</ol>
</div>
<br><br>结果是第(1)条平均用时<span style="font-weight: bold;">20s</span>，第(2)条平均用时<span style="font-weight: bold;">44s</span>，第(3)条平均用时<span style="font-weight: bold;">70s</span>，第(4)条平均用时<span style="font-weight: bold;">2s</span>。而且假如我们用explain观察第(3)条语句的执行情况，会发现它创建了temporary表来进行排序。<br><br><span style="font-weight: bold;">综上所述，可以得出如下结论：</span><br>1. 对需要查询和排序的字段要加索引。<br>2. 在一定环境下，left join还是比普通连接查询效率要高，但是要尽量少地连接表，并且在做连接查询时注意观察索引是否起了作用。<br>3. 排序尽量对第一个表的索引字段进行，可以避免mysql创建临时表，这是非常耗资源的。<br>4. 对where条件里涉及到的字段，应适当地添加索引，这样会对排序操作有优化的作用。<br>5.
在做随机抽取数据的需求时，避免使用order by rand()，从上面的例子可以看出，这种是很浪费数据库资源的，在执行过程中用show
processlist查看，会发现第(3)条有Copying to tmp table on
disk。而对(3)和(4)的对比得知，如果要实现这个功能，最好另辟奚径，来减轻Mysql的压力。<br>6.
从第4点可以看出，如果说在分页时我们能先得到主键，再根据主键查询相关内容，也能得到查询的优化效果。通过国外《High Performance
MySQL》专家组的测试可以看出，根据主键进行查询的类似“SELECT ... FROM... WHERE id =
...”的SQL语句（其中id为PRIMARYKEY），每秒钟能够处理<span style="font-weight: bold;">10000次</span>以上的查询，而普通的SELECT查询每秒只能处理<span style="font-weight: bold;">几十次到几百次</span>。涉及到分页的查询效率问题，网上的可用资源越来越多，查询功能也体现出了它的重要性。也便是sphinx、lucene这些第三方搜索引擎的用武之地了。<br>7. 在平时的作业中，可以打开Mysql的Slow queries功能，经常检查一下是哪些语句降低的Mysql的执行效率，并进行定期优化。
<div id="livemargins_control" style="position: absolute; display: none; z-index: 9999;"><img width="77" height="5" style="position: absolute; left: -77px; top: -5px;" src="chrome://livemargins/skin/monitor-background-horizontal.png">	<img style="position: absolute; left: 0pt; top: -5px;" src="chrome://livemargins/skin/monitor-background-vertical.png">	<img style="position: absolute; left: 1px; top: 0pt; opacity: 0.5; cursor: pointer;" src="chrome://livemargins/skin/monitor-play-button.png" id="monitor-play-button"></div>
                                                                                        </td>
                                                                                    </tr>
                                                                                </tbody>
                                                                            </table>   
</body>
</html>